/**
 * Local tests for the <%= verb %> /<%= version %>/<%= pathPrefix %><%= path %> endpoint.
 *
 * Generated on <%= day %> by yo generator-serverless-concourse.
 * @author <%= username %>
 */

describe('/<%= version %>/<%= filePrefix %><%= handlerFile %>.<%= handler %>', () => {

  const mod = require('../../../<%= depthPrefix %>functions/<%= version %>/<%= filePrefix %><%= handlerFile %>')
  const lambda = require('lambda-wrapper').wrap(mod, { handler: '<%= handler %>' })
  let response

  beforeAll(async (done) => {
    response = await lambda.run({ test: 'cbsuccess'})
    done()
  })

  it('should return 200', () => {
    expect(response.statusCode).toEqual(200)
  })

  it('should return sent input', () => {
    expect(JSON.parse(response.body).input.test).toEqual('cbsuccess')
  })

})
